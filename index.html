<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0b0d0f">
  <meta name="description" content="Gaia Dominium - Um jogo estratÃ©gico de conquista de territÃ³rios">
  
  <!-- Preload de recursos crÃ­ticos -->
  <link rel="preload" href="./assets/images/gaia-inicio.png" as="image">
  <link rel="preload" href="./assets/images/gaia-mapa.png" as="image">
  <link rel="preload" href="./assets/videos/gaia-video-inicio.mp4" as="video" type="video/mp4">
  
  <!-- Fontes -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  
  <!-- CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="style.css">
  
  <title>Gaia Dominium</title>
</head>
<body class="bg-cover bg-center bg-fixed" style="background-image: url('./assets/images/gaia-inicio.png');">

 <!-- ==================== VÃDEO DE ABERTURA DO JOGO ==================== -->

<video id="introVideo" autoplay muted playsinline aria-hidden="true">
  <source src="./assets/videos/gaia-video-inicio.mp4" type="video/mp4">
  Seu navegador nÃ£o suporta vÃ­deo HTML5. Por favor, atualize.
</video>

  <!-- ==================== MODAIS GLOBAIS (Z-INDEX ALTO) ==================== -->
  
<!-- MANUAL MODAL -->
<div id="manualModal" class="hidden fixed inset-0 z-[100] flex items-center justify-center p-6 modal-content-container">
  <div class="absolute inset-0 bg-black/60"></div>
  <div class="relative w-full max-w-4xl bg-gray-900/95 backdrop-blur-md border border-white/10 rounded-2xl shadow-xl p-6">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl text-yellow-300 font-semibold">Manual do Jogo â€” Gaia Dominium</h2>
      <div class="flex items-center gap-3">
        <button id="manualCloseBtn" class="text-gray-300 hover:text-white text-xl" aria-label="Fechar manual">âœ–</button>
      </div>
    </div>
    <div class="flex flex-col md:flex-row gap-6">
      <nav class="w-full md:w-48">
        <ul id="manualTabs" class="space-y-2">
          <li><button class="manual-tab w-full text-left px-4 py-2 rounded-md" data-tab="tab-o-jogo">O Jogo</button></li>
          <li><button class="manual-tab w-full text-left px-4 py-2 rounded-md" data-tab="tab-gaia">Universo Gaia</button></li>
          <li><button class="manual-tab w-full text-left px-4 py-2 rounded-md" data-tab="tab-regioes">As regiÃµes</button></li>
          <li><button class="manual-tab w-full text-left px-4 py-2 rounded-md" data-tab="tab-faccoes">As facÃ§Ãµes</button></li>
          <li><button class="manual-tab w-full text-left px-4 py-2 rounded-md" data-tab="tab-fases">Fases do Jogo</button></li>
          <li><button class="manual-tab w-full text-left px-4 py-2 rounded-md" data-tab="tab-acoes">AÃ§Ãµes</button></li>
          <li><button class="manual-tab w-full text-left px-4 py-2 rounded-md" data-tab="tab-negociacao">NegociaÃ§Ã£o</button></li>
          <li><button class="manual-tab w-full text-left px-4 py-2 rounded-md" data-tab="tab-estrutura">Estruturas</button></li>
          <li><button class="manual-tab w-full text-left px-4 py-2 rounded-md" data-tab="tab-eventos">Eventos</button></li>
          <li><button class="manual-tab w-full text-left px-4 py-2 rounded-md" data-tab="tab-conquistas">Conquistas</button></li>
        </ul>
      </nav>
      <div class="flex-1 overflow-auto max-h-[60vh]">
        <section id="tab-o-jogo" class="manual-content p-2"></section>
        <section id="tab-gaia" class="manual-content hidden p-2"></section>
        <section id="tab-regioes" class="manual-content hidden p-2"></section>
        <section id="tab-faccoes" class="manual-content hidden p-2"></section>
        <section id="tab-fases" class="manual-content hidden p-2"></section>
        <section id="tab-acoes" class="manual-content hidden p-2"></section>
        <section id="tab-negociacao" class="manual-content hidden p-2"></section>
        <section id="tab-estrutura" class="manual-content hidden p-2"></section>
        <section id="tab-eventos" class="manual-content hidden p-2"></section>
        <section id="tab-conquistas" class="manual-content hidden p-2"></section>
      </div>
    </div>
  </div>
</div>

  <!-- GLOBAL ALERT / CONFIRM MODAL -->
  <div id="alertModal" class="hidden fixed inset-0 z-[101] flex items-center justify-center p-4">
    <div class="relative w-full max-w-sm bg-gray-900 border border-yellow-500/50 rounded-xl shadow-2xl p-6 transform scale-100 transition-all">
      <div class="flex gap-4">
        <div id="alertIcon" class="text-3xl select-none">âš ï¸</div>
        <div>
          <h3 id="alertTitle" class="text-lg font-bold text-white">TÃ­tulo</h3>
          <p id="alertMessage" class="text-sm text-gray-300 mt-1">Mensagem...</p>
        </div>
      </div>
      <div id="alertButtons" class="mt-6 flex justify-end gap-2"></div>
    </div>
  </div>

  <!-- EVENTO GLOBAL -->
  <div id="eventModal" class="hidden fixed inset-0 z-[95] flex items-center justify-center p-6">
    <div class="absolute inset-0 bg-black/70"></div>
    <div class="relative bg-gray-900/90 border border-yellow-400/40 rounded-xl max-w-lg w-full p-5 shadow-2xl">
      <div class="flex items-start gap-3">
        <div id="eventIcon" class="text-4xl">ğŸ´</div>
        <div class="flex-1">
          <h3 id="eventTitle" class="text-lg font-semibold text-yellow-300 mb-1">
            Evento Global
          </h3>
          <p id="eventDescription" class="text-sm text-gray-200 mb-2">
            DescriÃ§Ã£o do evento.
          </p>
          <p id="eventEffect" class="text-xs text-yellow-200">
            Efeito: â€”
          </p>
          <p id="eventDuration" class="text-xs text-gray-400 mt-1">
            DuraÃ§Ã£o: â€”
          </p>
        </div>
      </div>
      <div class="mt-4 flex justify-end">
        <button id="eventOkBtn" class="px-4 py-1.5 rounded-md bg-yellow-400/90 text-gray-900 text-sm font-semibold hover:bg-yellow-300 transition">
          Entendi
        </button>
      </div>
    </div>
  </div>

<!-- MODAL DE RENDA -->
<div id="incomeModal" class="hidden fixed inset-0 z-[96] flex items-center justify-center p-6 modal-content-container">
  <div class="absolute inset-0 bg-black/70"></div>
  <div class="relative w-full max-w-md bg-gray-900/95 backdrop-blur-md border border-yellow-500/30 rounded-2xl shadow-xl p-6">
    <div class="text-center mb-4">
      <div class="text-4xl mb-2">ğŸ’°</div>
      <h3 class="text-xl font-bold text-yellow-300 mb-1">Renda do Turno</h3>
      <p id="incomePlayerName" class="text-gray-300">
        <!-- O texto serÃ¡ preenchido dinamicamente -->
      </p>
    </div>
    
    <div id="incomeResources" class="mb-6 p-4 bg-gray-800/50 rounded-lg">
      <!-- Recursos serÃ£o inseridos aqui dinamicamente -->
    </div>
    
    <div class="flex flex-col gap-2">
      <button id="incomeOkBtn" 
        class="px-4 py-3 bg-green-600 hover:bg-green-700 rounded-lg text-white font-semibold transition">
        OK - Iniciar AÃ§Ãµes
      </button>
      <p class="text-xs text-gray-400 text-center">
        Prepare suas estratÃ©gias para este turno
      </p>
    </div>
  </div>
</div>

<!-- MODAL DE CONFIRMAÃ‡ÃƒO DE SAVE/LOAD -->
<div id="saveLoadModal" class="hidden fixed inset-0 z-[103] flex items-center justify-center p-6 modal-content-container">
  <div class="absolute inset-0 bg-black/70"></div>
  <div class="relative w-full max-w-md bg-gray-900/95 backdrop-blur-md border border-yellow-500/30 rounded-2xl shadow-xl p-6">
    <div class="text-center mb-6">
      <div class="text-4xl mb-3">ğŸ’¾</div>
      <h3 class="text-xl font-bold text-yellow-300 mb-2">Jogo Salvo Encontrado</h3>
      <p class="text-gray-300 mb-1">Encontramos um jogo salvo.</p>
      <p class="text-gray-300">Deseja carregÃ¡-lo e comeÃ§ar de onde parou?</p>
    </div>
    <div class="flex flex-col gap-3">
      <button id="saveLoadYesBtn" class="px-4 py-3 bg-green-600 hover:bg-green-700 rounded-lg text-white font-semibold transition">
        Sim, Carregar Jogo
      </button>
      <button id="saveLoadNoBtn" class="px-4 py-3 bg-gray-800 hover:bg-gray-700 border border-white/6 rounded-lg text-white font-medium transition">
        NÃ£o, ComeÃ§ar Novo Jogo
      </button>
      <button id="saveLoadDeleteBtn" class="px-4 py-2 text-sm text-gray-400 hover:text-gray-300 transition">
        Excluir Save (IrrecuperÃ¡vel)
      </button>
    </div>
  </div>
</div>

  <!-- NEGOTIATION MODAL (offer creation) -->
  <div id="negotiationModal" class="hidden fixed inset-0 z-[98] flex items-center justify-center p-6 modal-content-container">
    <div class="absolute inset-0 bg-black/70"></div>
    <div class="relative w-full max-w-3xl bg-gray-900 rounded-xl border border-white/8 p-6 shadow-xl overflow-auto max-h-[80vh]">
  <h3 class="text-lg font-semibold text-yellow-300 mb-4 text-center">ğŸ¤ Crie Sua Proposta de NegociaÃ§Ã£o</h3>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- SeÃ§Ã£o de Oferta -->
    <div class="p-4 bg-gray-800/50 rounded-lg border border-green-500/20 negotiation-section">
      <h4 class="text-md font-medium text-green-300 mb-3 flex items-center gap-2">
        <span class="text-xl">ğŸ</span> O Que VocÃª Oferece
        <span class="ml-auto text-xs text-gray-400 cursor-help" title="Selecione recursos e regiÃµes que vocÃª darÃ¡ ao alvo. Custa 1 Ouro para enviar.">â„¹ï¸</span>
      </h4>
      <label class="text-sm text-gray-300 block mb-2">Selecionar Alvo</label>
      <select id="negTarget" class="w-full bg-gray-800 text-white p-2 rounded-md border border-gray-700 focus:border-green-400 focus:outline-none"></select>
      <label class="text-sm text-gray-300 mt-4 block">Recursos Oferecidos (vocÃª possui: <span id="offerResourcesInfo" class="text-yellow-300">0ğŸªµ 0ğŸª¨ 0ğŸª™ 0ğŸ’§</span>)</label>
      <div id="offerResourcesContainer" class="mt-2 grid grid-cols-2 gap-2"></div>
      <label class="text-sm text-gray-300 mt-4 block">RegiÃµes Oferecidas (selecione)</label>
      <div id="offerRegions" class="mt-2 grid grid-cols-2 gap-2"></div>
    </div>
    <!-- SeÃ§Ã£o de SolicitaÃ§Ã£o -->
    <div class="p-4 bg-gray-800/50 rounded-lg border border-red-500/20 negotiation-section">
      <h4 class="text-md font-medium text-red-300 mb-3 flex items-center gap-2">
        <span class="text-xl">ğŸ“¥</span> O Que VocÃª Solicita
        <span class="ml-auto text-xs text-gray-400 cursor-help" title="Selecione o que vocÃª quer receber em troca.">â„¹ï¸</span>
      </h4>
      <label class="text-sm text-gray-300 block mb-2">Alvo: <span id="targetPlayerName" class="text-yellow-300">NinguÃ©m</span> (possui: <span id="requestResourcesInfo" class="text-yellow-300">â€”</span>)</label>
      <div id="requestResourcesContainer" class="mt-2 grid grid-cols-2 gap-2"></div>
      <label class="text-sm text-gray-300 mt-4 block">RegiÃµes Solicitadas</label>
      <div id="reqRegions" class="mt-2 grid grid-cols-2 gap-2"></div>
    </div>
  </div>
  <!-- RodapÃ© com Resumo e BotÃµes -->
  <div class="mt-6 p-4 bg-gray-800/30 rounded-lg border border-white/10">
    <h4 class="text-sm font-medium text-yellow-300 mb-2">Resumo da Proposta</h4>
    <div id="negotiationSummary" class="text-sm text-gray-300">Nenhuma oferta ou solicitaÃ§Ã£o selecionada ainda.</div>
  </div>
  <div class="mt-4 flex justify-end gap-3">
    <button id="negCancelBtn" class="px-4 py-2 bg-gray-800 border border-white/6 rounded-md text-white hover:bg-gray-700 transition">Cancelar</button>
    <button id="negSendBtn" class="px-4 py-2 bg-green-600 rounded-md text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-700 transition" disabled>Enviar Proposta (custa 1 ğŸª™)</button>
  </div>
</div>
  </div>

  <!-- NEGOTIATION RESPONSE MODAL (target view) -->
  <div id="negResponseModal" class="hidden fixed inset-0 z-[99] flex items-center justify-center p-6">
    <div class="absolute inset-0 bg-black/70"></div>
    <div class="relative w-full max-w-lg bg-gray-900 rounded-xl border border-white/8 p-6 shadow-xl">
      <h3 id="negResponseTitle" class="text-lg font-semibold text-yellow-300 mb-2">Proposta Recebida</h3>
      <div id="negResponseBody" class="text-gray-200 text-sm"></div>
      <div class="mt-4 text-right">
        <button id="negDeclineBtn" class="px-4 py-2 bg-rose-600 rounded-md text-white mr-2">Recusar</button>
        <button id="negAcceptBtn" class="px-4 py-2 bg-green-600 rounded-md text-white">Aceitar</button>
      </div>
    </div>
  </div>

<!-- MODAL DE SELEÃ‡ÃƒO DE ESTRUTURA -->
<div id="structureModal" class="hidden fixed inset-0 z-[97] flex items-center justify-center p-6 modal-content-container">
  <div class="absolute inset-0 bg-black/70"></div>
  <div class="relative w-full max-w-4xl bg-gray-900/95 backdrop-blur-md border border-yellow-500/30 rounded-2xl shadow-xl p-6">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl text-yellow-300 font-semibold">ğŸ—ï¸ Escolher Estrutura</h2>
      <button id="structureModalClose" class="text-gray-300 hover:text-white text-xl">âœ–</button>
    </div>
    
    <div class="mb-4">
      <p class="text-gray-300 text-sm">Selecione a estrutura que deseja construir na regiÃ£o:</p>
      <p id="structureModalRegion" class="text-yellow-400 font-semibold mt-1"></p>
    </div>
    
    <div id="structureOptions" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto p-2">
      <!-- As opÃ§Ãµes serÃ£o geradas dinamicamente pelo JavaScript -->
    </div>
  </div>
</div>

  <!-- MODAL DE VITÃ“RIA COMPLETO -->
<div id="victoryModal" class="hidden fixed inset-0 z-[102] flex items-center justify-center p-6 modal-content-container">
  <div class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
  <div class="relative bg-gradient-to-br from-gray-900 to-gray-950 backdrop-blur-xl border-2 border-yellow-400/40 rounded-3xl p-8 max-w-2xl w-full mx-4 text-center shadow-2xl shadow-yellow-500/10 animate__animated animate__bounceIn">
    
    <!-- Ãcone animado -->
    <div class="relative mb-6">
      <div class="absolute inset-0 flex items-center justify-center">
        <div class="w-48 h-48 bg-yellow-500/10 rounded-full animate-ping"></div>
      </div>
      <div class="text-8xl mb-2 animate__animated animate__tada animate__infinite">ğŸ†</div>
    </div>
    
    <!-- TÃ­tulo -->
    <h3 id="victoryModalTitle" class="text-4xl font-bold bg-gradient-to-r from-yellow-300 to-yellow-500 bg-clip-text text-transparent mb-3">
      VITÃ“RIA!
    </h3>
    
    <!-- Mensagem -->
    <div class="mb-8">
      <p id="victoryModalMessage" class="text-xl text-gray-200 mb-2">
        ParabÃ©ns, <span id="victoryPlayerName" class="text-yellow-300 font-bold"></span>!
      </p>
      <p class="text-gray-300">VocÃª dominou Gaia!</p>
    </div>
    
    <!-- PontuaÃ§Ã£o -->
    <div class="mb-8 p-6 bg-gradient-to-r from-yellow-900/30 to-amber-900/20 border border-yellow-500/30 rounded-2xl backdrop-blur-sm">
      <h4 class="text-lg font-semibold text-yellow-200 mb-3">PontuaÃ§Ã£o Final</h4>
      <div class="flex items-center justify-center gap-4">
        <div class="text-center">
          <div class="text-5xl font-bold text-white" id="victoryPointsDisplay">0</div>
          <div class="text-sm text-yellow-300 mt-1">â­ Pontos de VitÃ³ria</div>
        </div>
        <div class="h-16 w-px bg-yellow-500/30"></div>
        <div class="text-center">
          <div class="text-4xl font-bold text-white" id="victoryTurnCount">0</div>
          <div class="text-sm text-yellow-300 mt-1">ğŸ”„ Turnos</div>
        </div>
      </div>
    </div>
    
    <!-- BotÃµes -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <button id="victoryNewGameBtn" 
              class="px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800 rounded-xl text-white font-bold text-lg transition-all transform hover:scale-105 hover:shadow-2xl hover:shadow-green-500/20 active:scale-95">
        ğŸ® Novo Jogo
      </button>
      <button id="victoryModalClose" 
              class="px-8 py-4 bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800 border-2 border-white/10 rounded-xl text-white font-bold text-lg transition-all transform hover:scale-105 active:scale-95">
        Fechar
      </button>
    </div>
    
    <!-- Mensagem extra -->
    <p class="text-gray-400 text-sm mt-8">
      O jogo serÃ¡ reiniciado ao clicar em "Novo Jogo". Seus dados serÃ£o salvos.
    </p>
    
  </div>
</div>
  
  <!-- ==================== INTERFACE PRINCIPAL ==================== -->
  
  <!-- MANUAL ICON (flutuante) -->
  <button id="manualIcon" class="fixed top-5 right-5 z-50 p-3 rounded-full bg-black/50 backdrop-blur-sm border border-yellow-400/30 shadow-lg hover:scale-105 transition" aria-label="Abrir Manual">
    <svg class="w-6 h-6 text-yellow-200" viewBox="0 0 24 24" fill="currentColor"><path d="M18 2H6C4.89 2 4 2.89 4 4V20C4 21.11 4.89 22 6 22H18C19.11 22 20 21.11 20 20V4C20 2.89 19.11 2 18 2M16 8H8V6H16V8M16 12H8V10H16V12M14 16H8V14H14V16Z"/></svg>
  </button>

  <!-- ==================== TELA DE CADASTRO - FORMATO HORIZONTAL ==================== -->
<div id="initialScreen" class="fixed inset-0 z-50 flex items-center justify-center p-4">
  <!-- Overlay sutil -->
  <div class="absolute inset-0 bg-black/25"></div>
  
  <!-- Faixa horizontal flutuante -->
  <div class="relative w-full max-w-5xl">
    <!-- Faixa principal de cadastro -->
    <div class="player-modal border border-white/15 rounded-2xl p-6 shadow-2xl">
      <!-- Linha 1: Controles principais -->
      <div class="flex items-center gap-4 mb-6">
        <!-- Nome do jogador -->
        <div class="flex-1">
          <div class="relative">
            <input 
              id="playerName" 
              type="text" 
              placeholder="Nome do jogador" 
              class="w-full bg-gray-800/70 text-white placeholder-gray-400 border border-white/10 rounded-xl px-4 py-3 pl-12 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500/30 transition-all"/>
          </div>
        </div>
        
        <!-- Dropdown de facÃ§Ã£o -->
        <div class="w-48">
          <div class="relative">
            <select 
               id="factionDropdown"
               class="faction-dropdown w-full bg-gray-900/80 text-white border border-yellow-500/30 rounded-xl px-4 py-3 pl-12 pr-10 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-yellow-500/70 focus:border-yellow-500/50 transition-all backdrop-blur-sm shadow-lg"
    >
              <option value="" selected disabled class="placeholder-option">Qual FacÃ§Ã£o?  </option>
              <!-- OpÃ§Ãµes preenchidas por JS -->
              </select>
           </div>
        </div>
        
        <!-- BotÃµes de aÃ§Ã£o -->
        <div class="flex gap-3">
          <button 
            id="addPlayerBtn" 
            class="px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 rounded-xl text-white font-semibold transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-lg"
          >
            + Adicionar
          </button>
          <button 
            id="cancelEditBtn" 
            class="hidden px-6 py-3 bg-gray-800 hover:bg-gray-700 border border-white/10 rounded-xl text-white font-semibold transition-all"
          >
            âœ— Cancelar
          </button>
        </div>
        
        <!-- BotÃ£o iniciar jogo -->
        <button 
          id="startGameBtn" 
          disabled
          class="px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 disabled:from-gray-800 disabled:to-gray-900 disabled:cursor-not-allowed rounded-xl text-white font-semibold transition-all whitespace-nowrap shadow-lg"
        >
          ğŸš€ Iniciar Jogo
        </button>
      </div>
      
      <!-- Linha 2: BotÃµes de Ã­cones e IA -->
      <div class="flex items-center justify-between border-t border-white/10 pt-6">
        <!-- BotÃµes de Ã­cones -->
        <div class="flex-1">
          <div class="flex items-center gap-2 mb-2">
            <span class="text-sm font-medium text-gray-200">ğŸ­ Selecione um Ã­cone:</span>
              <span id="selectedIconDisplay" class="text-lg ml-2"></span>
            </div>
            <div id="iconSelection" class="flex flex-wrap gap-2">
              <!-- BotÃµes de Ã­cones serÃ£o inseridos aqui -->
            </div>
          </div>
        
        <!-- Divisor vertical -->
        <div class="h-12 w-px bg-white/10 mx-6"></div>
        
        <!-- BotÃµes de IA -->
        <div>
          <div class="flex items-center gap-2 mb-2">
            <span class="text-sm font-medium text-gray-200">ğŸ¤– Adicionar IA:</span>
          </div>
          <div id="aiButtonsContainer" class="flex gap-2">
            <!-- BotÃµes de IA serÃ£o inseridos aqui -->
          </div>
        </div>
      </div>
      <div class="flex items-center justify-between mb-4">
        <p class="text-sm text-gray-300">ğŸ‘¥ Jogadores Registrados</p>
        <div class="text-sm text-gray-300">
          <span id="playerCountDisplay">0</span>/4 jogadores
        </div>
      </div>
      
      <div 
        id="registeredPlayersList" 
        class="grid grid-cols-2 md:grid-cols-4 gap-3 py-3 px-2 max-w-full min-h-[140px]">
        <!-- Slot 1 -->
        <div class="player-card empty" data-index="0" data-empty="true">
          <div class="player-card-inner flex flex-col items-center justify-center h-full p-4 rounded-lg border-2 border-dashed border-gray-600 bg-gray-800/20 transition-all hover:border-gray-500">
            <div class="text-3xl text-gray-500 mb-2">ğŸ‘¤</div>
            <div class="text-center">
              <div class="text-sm font-bold text-gray-500">Slot Vazio</div>
              <div class="text-xs text-gray-500 mt-1">Adicione um jogador</div>
            </div>
          </div>
        </div>
        
        <!-- Slot 2 -->
        <div class="player-card empty" data-index="1" data-empty="true">
          <div class="player-card-inner flex flex-col items-center justify-center h-full p-4 rounded-lg border-2 border-dashed border-gray-600 bg-gray-800/20 transition-all hover:border-gray-500">
            <div class="text-3xl text-gray-500 mb-2">ğŸ‘¤</div>
            <div class="text-center">
              <div class="text-sm font-bold text-gray-500">Slot Vazio</div>
              <div class="text-xs text-gray-500 mt-1">Adicione um jogador</div>
            </div>
          </div>
        </div>
        
        <!-- Slot 3 -->
        <div class="player-card empty" data-index="2" data-empty="true">
          <div class="player-card-inner flex flex-col items-center justify-center h-full p-4 rounded-lg border-2 border-dashed border-gray-600 bg-gray-800/20 transition-all hover:border-gray-500">
            <div class="text-3xl text-gray-500 mb-2">ğŸ‘¤</div>
            <div class="text-center">
              <div class="text-sm font-bold text-gray-500">Slot Vazio</div>
              <div class="text-xs text-gray-500 mt-1">Adicione um jogador</div>
            </div>
          </div>
        </div>
        
        <!-- Slot 4 -->
        <div class="player-card empty" data-index="3" data-empty="true">
          <div class="player-card-inner flex flex-col items-center justify-center h-full p-4 rounded-lg border-2 border-dashed border-gray-600 bg-gray-800/20 transition-all hover:border-gray-500">
            <div class="text-3xl text-gray-500 mb-2">ğŸ‘¤</div>
            <div class="text-center">
              <div class="text-sm font-bold text-gray-500">Slot Vazio</div>
              <div class="text-xs text-gray-500 mt-1">Adicione um jogador</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- NAVBAR DO JOGO -->
  <nav id="gameNavbar" class="hidden fixed top-0 left-0 right-0 z-40 bg-black/60 backdrop-blur-md border-b border-white/6">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3">
      <div class="flex items-center gap-4">
        <h1 class="text-xl font-semibold text-yellow-300">Gaia Dominium</h1>
        <div id="turnInfo" class="text-sm text-gray-200">Turno: 0 â€¢ Jogador: â€”</div>
        <div id="phaseIndicator" class="text-sm text-yellow-300 font-semibold">Fase: Renda</div>
      </div>
      <div class="flex items-center gap-4">
        <div id="playerHeaderList" class="flex items-center gap-3"></div>
        <button id="manualIconNavbar" class="p-2 rounded-full bg-white/10 hover:bg-white/20 transition" aria-label="Abrir Manual">
          <svg class="w-6 h-6 text-yellow-200" viewBox="0 0 24 24" fill="currentColor"><path d="M18 2H6C4.89 2 4 2.89 4 4V20C4 21.11 4.89 22 6 22H18C19.11 22 20 21.11 20 20V4C20 2.89 19.11 2 18 2M16 8H8V6H16V8M16 12H8V10H16V12M14 16H8V14H14V16Z"/></svg>
        </button>
        <button id="achievementsNavBtn" class="p-2 rounded-full bg-white/10 hover:bg-white/20 transition" aria-label="Conquistas">
          <span class="text-xl">ğŸ†</span>
        </button>
      </div>
    </div>
  </nav>

  <!-- CONTAINER PRINCIPAL DO JOGO -->
  <div id="gameContainer" class="hidden p-4 max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-4">
    
    <!-- SIDEBAR -->
    <aside id="sidebar" class="hidden bg-gray-900/80 backdrop-blur-md border border-white/8 rounded-xl p-4 overflow-auto">
      <div id="sidebarPlayerHeader" class="flex items-center gap-3 mb-3"></div>

      <!-- EVENTO ATIVO -->
      <div id="eventBanner" class="hidden mb-3 p-3 rounded-lg border animate-pulse-slow">
        <div class="flex items-center gap-2 mb-1">
          <span id="eventBannerIcon" class="text-xl"></span>
          <h4 id="eventBannerTitle" class="text-xs font-bold flex-1"></h4>
          <button id="eventBannerClose" class="text-white/60 hover:text-white text-lg">Ã—</button>
        </div>
        <p id="eventBannerEffect" class="text-xs mb-1"></p>
        <div id="eventBannerTurns" class="text-xs px-2 py-0.5 rounded bg-black/30 inline-block"></div>
      </div>

      <div class="mb-4">
        <h3 class="text-sm text-gray-300 font-medium mb-2">Recursos</h3>
        <ul id="resourceList" class="mt-2 text-gray-100 text-sm"></ul>
      </div>

      <div>
        <h3 class="text-sm text-gray-300 font-medium mb-2">RegiÃµes Controladas</h3>
        <div id="controlledRegions" class="mt-2 text-sm text-gray-100"></div>
      </div>
      
      <!-- HISTÃ“RICO DE ATIVIDADES -->
      <div class="mt-3">
        <div class="flex items-center justify-between mb-1">
          <h4 class="text-xs font-semibold text-gray-200">HistÃ³rico</h4>
          <div class="flex gap-1 text-[10px]">
            <button id="logFilterAllSidebar" class="log-filter-sidebar px-1.5 py-0.5 rounded bg-blue-600/20 text-blue-300" data-filter="all">Todas</button>
            <button id="logFilterMineSidebar" class="log-filter-sidebar px-1.5 py-0.5 rounded bg-gray-600/20 text-gray-300" data-filter="mine">Minhas</button>
            <button id="logFilterEventsSidebar" class="log-filter-sidebar px-1.5 py-0.5 rounded bg-gray-600/20 text-gray-300" data-filter="events">Eventos</button>
          </div>
        </div>
        <div id="logEntriesSidebar" class="text-[11px] text-gray-300 max-h-28 overflow-y-auto space-y-0.5"></div>
      </div>

      <!-- CONQUISTAS -->
      <div class="mt-3">
        <h4 class="text-xs font-semibold text-gray-200 mb-2">Conquistas</h4>
        <div id="achievementsList" class="space-y-2"></div>
      </div>
  
      <!-- Controle de TransparÃªncia -->
<div class="transparency-control mt-4 p-3 bg-gray-800/40 rounded-lg border border-white/5">
  <div class="flex items-center justify-between mb-2">
    <label class="text-xs font-medium text-gray-200">TransparÃªncia das RegiÃµes</label>
    <span id="transparencyValue" class="text-xs font-bold text-yellow-300">15%</span>
  </div>
  <div class="flex items-center gap-3">
    <span class="text-xs text-gray-400">5%</span>
    <input 
      type="range" 
      min="5" 
      max="50" 
      value="15" 
      class="transparency-slider flex-1" 
      id="cellTransparencySlider"
      title="Ajuste para ver mais ou menos o mapa de fundo"
    >
    <span class="text-xs text-gray-400">50%</span>
  </div>
  <div class="flex justify-between mt-1">
    <span class="text-[10px] text-gray-400">Ver mapa</span>
    <span class="text-[10px] text-gray-400">Ver regiÃµes</span>
  </div>
</div>
<!-- BotÃ£o de reset (opcional) -->
<button id="resetTransparencyBtn" 
        class="mt-2 text-xs text-gray-400 hover:text-yellow-300 transition"
        title="Resetar para o valor padrÃ£o">
  â†º Resetar transparÃªncia
</button>
    </aside>

    <!-- MAPA -->
    <main id="gameMap" class="hidden relative">
      <!-- Viewport para zoom/pan -->
      <div id="mapViewport" class="absolute inset-0 overflow-hidden">
        <!-- Container para transformaÃ§Ãµes de zoom -->
        <div id="mapTransform" class="relative w-full h-full">
          <!-- Imagem do mapa (fundo) -->
          <img 
            src="./assets/images/gaia-mapa.png" 
            alt="Mapa de Gaia" 
            class="absolute inset-0 w-full h-full object-cover pointer-events-none select-none"
          />
          <!-- Grid de 25 quadrantes do mapa -->
          <div id="boardContainer" class="absolute inset-0 grid grid-cols-5 gap-0">
            <!-- As cÃ©lulas serÃ£o geradas aqui pelo JavaScript -->
          </div>
        </div>
      </div>
      
      <!-- Tooltip (aparece ao hover) -->
      <div id="regionTooltip" class="hidden absolute z-50 w-64 bg-gray-900/95 border border-white/8 rounded-lg p-3 text-sm shadow-xl">
        <div id="tooltipTitle" class="font-semibold text-white"></div>
        <div id="tooltipBody" class="text-gray-300 mt-2"></div>
      </div>
    </main>
  </div>

  <!-- FOOTER DE AÃ‡Ã•ES -->
  <footer id="gameFooter" class="hidden fixed bottom-4 left-1/2 -translate-x-1/2 z-45 w-full max-w-4xl px-4">
    <div class="bg-gray-900/85 backdrop-blur-md border border-white/8 rounded-lg p-3 flex items-center justify-between gap-3">
      <div class="flex gap-2">
        <button id="actionExplore" class="action-btn px-3 py-2 rounded-md">Explorar</button>
        <button id="actionCollect" class="action-btn px-3 py-2 rounded-md">Coletar</button>
        <button id="actionBuild" class="action-btn px-3 py-2 rounded-md">Construir</button>
        <button id="actionNegotiate" class="action-btn px-3 py-2 rounded-md">Negociar</button>
      </div>
      <div class="flex items-center gap-3">
        <div id="actionsLeft" class="text-sm text-gray-200">AÃ§Ãµes restantes: 2</div>
        <button id="endTurnBtn" class="px-4 py-2 bg-rose-600 rounded-md text-white font-semibold">TÃ©rmino do Turno</button>
      </div>
    </div>
  </footer>

<!-- Painel de Debug da IA (visÃ­vel apenas em desenvolvimento) -->
<div id="aiDebugPanel" class="hidden fixed bottom-20 right-4 z-40 w-64 bg-gray-900/90 border border-purple-500/50 rounded-lg p-3 text-xs">
  <div class="flex justify-between items-center mb-2">
    <h4 class="font-bold text-purple-300">ğŸ¤– Debug IA</h4>
    <button onclick="document.getElementById('aiDebugPanel').classList.add('hidden')" class="text-gray-400">Ã—</button>
  </div>
  <div id="aiDebugContent"></div>
</div>

<button id="toggleAIDebug" class="hidden fixed bottom-4 right-4 z-40 p-2 bg-purple-600 rounded-full text-white">
  ğŸ¤–
</button>

  <!-- SCRIPTS MODULARES -->
  <script type="module" src="./js/main.js"></script>
</body>
</html>
