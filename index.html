<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gaia Dominium - Multiplayer Local</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body onmousemove="handleMouseMove(event)">

        <nav class="navbar navbar-dark">
        <span class="navbar-brand">Gaia Dominium</span>
        <div class="header-player-list" id="playerHeaderList">
            <span class="header-player-item">Aguardando In√≠cio...</span>
        </div>
        <span class="manual-icon" id="manualIcon" data-bs-toggle="modal" data-bs-target="#manualModal">
            <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                <path d="M18 2H6C4.9 2 4 2.9 4 4v16c0 1.1 0.9 2 2 2h12c1.1 0 2-0.9 2-2V4C20 2.9 19.1 2 18 2zM6 4h12v16H6V4zm7 14h-2v-2h2v2zm0-4h-2V7h2v7z"/>
            </svg>
        </span>
    </nav>

    <div class="main-container">
        <div class="sidebar">
            <h5 id="recursosTitle">Recursos</h5>
            <div id="recursosDisplay">
                </div>
            
            <h5 id="pvTitle" style="margin-top: 20px;">Placar Global</h5>
            <div class="resource-item">
                <span class="label">Turno:</span>
                <span class="value" id="turnoDisplay">0</span>
            </div>
            <div id="playerListDisplay">
                </div>
        </div>

        <div class="game-map-container">
            <div class="game-map" id="gameMap">
                </div>
            
            <div id="regionDetailsPopup" class="region-details-popup">
                </div>

            <div class="action-panel">
                <button class="action-btn" id="explorarBtn" disabled title="">Explorar</button>
                <button class="action-btn" id="construirBtn" disabled title="">Construir</button>
                <button class="action-btn" id="recolherBtn" disabled title="">Recolher</button>
                <button class="action-btn" id="negociarBtn" disabled title="">Negociar</button>
                <button class="action-btn" id="endTurnBtn" disabled>Finalizar Turno</button>
            </div>
        </div>
    </div>

    <div class="initial-screen" id="initialScreen">
        <div class="player-setup-form">
            <h1>Configura√ß√£o de Partida</h1>
            <p>Multiplayer local para 2 a 4 jogadores. Cadastre os jogadores para come√ßar.</p>
            
            <div class="player-count-display" id="playerCountDisplay">0/4 Jogadores Registrados</div>
            
            <div class="player-input-group">
                <label for="playerName">Nome:</label>
                <input type="text" id="playerName" placeholder="Nome do Jogador">
            </div>

            <div class="player-input-group">
                <label>√çcone:</label>
                <div id="iconSelection">
                    </div>
            </div>

            <div class="d-grid gap-2">
                <button class="action-btn" id="addPlayerBtn">Adicionar Jogador</button>
                <button class="action-btn" id="startGameBtn" disabled style="margin-top: 10px;">Iniciar Jogo</button>
            </div>
        </div>
    </div>

    <div id="feedbackMessage"></div>

    <div class="modal fade" id="manualModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Manual do Jogo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <button class="nav-link active" id="regras-tab" data-bs-toggle="tab" data-bs-target="#regras" type="button">Regras</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" id="mecanicas-tab" data-bs-toggle="tab" data-bs-target="#mecanicas" type="button">Mec√¢nicas</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" id="estruturas-tab" data-bs-toggle="tab" data-bs-target="#estruturas" type="button">Estruturas</button>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="regras">
                            <p style="margin-top: 15px;">O objetivo de Gaia Dominium √© ser o primeiro a alcan√ßar 25 Pontos de Vit√≥ria (PVs) para conquistar o planeta.</p>
                            <p>Cada jogador controla uma Fac√ß√£o com recursos iniciais e uma renda baseada em regi√µes e projetos ativos.</p>
                            <h4 style="margin-top: 20px;">Recursos Essenciais</h4>
                            <ul>
                                <li><strong>üå≤ Madeira (M):</strong> Recurso prim√°rio, usado para constru√ß√£o e recolha.</li>
                                <li><strong>üóø Pedra (P):</strong> Usada em constru√ß√µes mais robustas.</li>
                                <li><strong>üí∞ Ouro (G):</strong> Recurso estrat√©gico, essencial para negocia√ß√£o.</li>
                                <li><strong>üíß √Ågua (A):</strong> Recurso vital para produ√ß√£o e desenvolvimento.</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="mecanicas">
                            <h4>Mec√¢nicas do Jogo</h4>
                            <p><strong>Fluxo de Um Turno:</strong></p>
                            <ul>
                                <li><strong>Fase 1 - Renda Autom√°tica:</strong> Sistema calcula e adiciona recursos baseado em regi√µes controladas e estruturas.</li>
                                <li><strong>Fase 2 - A√ß√£o Principal:</strong> Jogador executa at√© **duas** a√ß√µes modulares (Explorar, Construir, Recolher, Negociar). Cada a√ß√£o s√≥ pode ser feita uma vez por turno.</li>
                                <li><strong>Fase 3 - Passar Turno:</strong> Turno passa para o pr√≥ximo jogador, verificando a condi√ß√£o de vit√≥ria.</li>
                            </ul>
                            <h4 style="margin-top: 20px;">Regras Especiais</h4>
                            <ul>
                                <li><strong>Limite de A√ß√µes:</strong> M√°ximo de 2 a√ß√µes por turno.</li>
                                <li><strong>Explora√ß√£o:</strong> Regi√µes n√£o exploradas (`N√≠vel 0`) n√£o geram renda b√¥nus e n√£o podem ser constru√≠das.</li>
                                <li><strong>B√¥nus de Diversidade:</strong> +3 PV ao controlar uma regi√£o de cada tipo de Bioma.</li>
                                <li><strong>San√ß√£o por Inatividade:</strong> Se um jogador passar o turno 3 vezes seguidas sem realizar nenhuma a√ß√£o, sua renda base √© suspensa no pr√≥ximo turno.</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="estruturas">
                            <h4>Estruturas Dispon√≠veis</h4>
                            <div id="structuresManualContent">
                                <p>Carregando informa√ß√µes...</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="playerResourcesModal" tabindex="-1" aria-labelledby="playerResourcesModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-surface text-text">
                <div class="modal-header">
                    <h5 class="modal-title" id="playerResourcesModalLabel">Recursos de Jogador</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="playerResourcesContent">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="buildModal" tabindex="-1" aria-labelledby="buildModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-surface text-text">
                <div class="modal-header">
                    <h5 class="modal-title" id="buildModalLabel">üõ†Ô∏è Selecione a Estrutura para Construir</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="buildOptionsContent">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="negotiationModal" tabindex="-1" aria-labelledby="negotiationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-surface text-text">
                <div class="modal-header">
                    <h5 class="modal-title" id="negotiationModalLabel">üí∞ Negocia√ß√£o</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="negotiationContent">
                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="victoryModal" tabindex="-1" aria-labelledby="victoryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-surface text-text">
                <div class="modal-header">
                    <h5 class="modal-title" id="victoryModalLabel">üèÜ Fim de Jogo!</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="victoryContent">
                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="window.location.reload();">Novo Jogo</button>
                </div>
            </div>
        </div>
    </div>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="main.js"></script>
</body>
</html>
